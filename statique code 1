#include <stdio.h>
#include <stdlib.h>
#include <string.h>



int calcCentrex(int tabx );
int calcCentrey(int taby );


int main(int argc, char *argv[])

{

    FILE* image = NULL;

    int i = 0; // on définie toutes les variables à 0
    int j = 0;
    int k = 0;
    int l = 0;
    char caractereActuel; // définie une structure 
    int tabx; // définie la largeur du tableau
    int taby; // définie la longueur du tableau
    int* tabAdd[5];
    int tabAff[24][80]= {0}; // définie la taille fixe de la console
    int calcx = 0;
    int calcy = 0;

    int randomImage = 1;




    if (randomImage == 1) // choix aléatoire d'une image
    {
      image = fopen("ex1.pbm", "r"); // permet d'ouvrir le fichier contenant l'image ex1
    }

    if (randomImage == 2)
    {
      image = fopen("ex2.pbm", "r");
    }


    if (image != NULL)
    {
      while (i <=2)
      {
        while (caractereActuel != '\n')
        {
          caractereActuel = fgetc(image);
        }

        i++;

        if (i == 1)
        {
          fscanf(image, "%d %d ", &taby, &tabx);
          i++;
        }
      }
    }

    int InfoImage[taby][tabx];


      i = 0;
      j = 0;




if (image != NULL)
{

      for (i = 0; i < taby ; i++)
      {
          for(j = 0; j < tabx; j++)
          {
                caractereActuel = fgetc(image);

                if ( (caractereActuel == '1') || (caractereActuel == '0'))
                {
                  if (caractereActuel == '0')
                  {
                    InfoImage[i][j] = 0;
                  }

                  if (caractereActuel == '1')
                  {
                    InfoImage[i][j] = 1;
                  }


                }

                else
                {
                  j--;
                }


          }

      }

  }

      fclose(image);

      i = 0;
      j = 0;

      calcx = calcCentrex(tabx);
      calcy = calcCentrey(taby);
      k = calcy;
      l = calcx;

      for (i = 0  ; i < taby  ; i++ )
        {

                for(j = 0 ; j < tabx ; j++)
                {
                  tabAff[k][l] = InfoImage[i][j];
                  l++;
                }

                l = calcx;
                k++;
       }

            i = 0;
            j = 0;

            system("clear");


            for (i = 0; i < 24; i++)
            {

                for(j = 0; j < 80; j++)
                {

                  if (tabAff[i][j] == 0)
                  {
                    printf("%c",255);
                  }
                  else if(tabAff[i][j] == 1)
                  {
                    printf("%c",254);
                  }

              }
                printf ("\n");

            }

      system("stty cbreak -echo"); // permet de faire un arrêt
      getchar(); // permet de voir si l'utilisateur appuie sur une touche
      system("stty cooked echo");
      system("clear"); // permet de supprimer le contenue

    return 1;



}



int calcCentrex(int tabx) // cette fonction permet de centrer l'image au niveau de la largueur

{
  int calcx ;
  calcx = 80 - tabx ; // calcul la différence entre la taille de la console et celle de l'image
  calcx = calcx / 2 ; // divise la valeur calculée juste avant 


  return calcx;
}


int calcCentrey(int taby) // cette fonction permet de centrer l'image au niveau de la hauteur

{
  int calcy ;
  calcy = 24 - taby ;
  calcy = calcy / 2 ;

  return calcy;
}
