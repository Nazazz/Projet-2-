#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define TAILLE_MAX 1000

struct InfoImage {

  int p;
  int tabx ;
  int taby ;

};







int main(int argc, char *argv[])

{




    FILE* image = NULL;

    int i = 0;
    int j = 0;
    char caractereActuel;
    int tabx;
    int taby;
    int *tabAdd[5];
    int tabImage[15][15];





    int randomImage = 2;





    if (randomImage == 1)
    {
      image = fopen("ex1.pbm", "r");

    }

    if (randomImage == 2)
    {
      image = fopen("ex2.pbm", "r");

    }




    if (image != NULL)

    {


      while (i <=2)
      {
        while (caractereActuel != '\n')
        {
          caractereActuel = fgetc(image); // On lit le caractère

        }
        i++;

        if (i == 1)
        {
          fscanf(image, "%d %d ", &tabx, &taby);
          //printf("le tableau a pour taille %d  %d  \n", tabx , taby);

          i++;

        }



      }


      i = 0;
      j = 0;






      for (i = 0; i < tabx ; i++)
      {
          for(j = 0; j < taby; j++)
          {
                caractereActuel = fgetc(image); // On lit le caractère
                //printf("I : %d - J : %d - C : %c\n",i,j,caractereActuel );

                if ( (caractereActuel == '1') || (caractereActuel == '0'))
                {
                  if (caractereActuel == '0')
                  {
                    tabImage[i][j] = 0;
                    //printf("Test : %d", tabImage[i][j]);

                  }

                  if (caractereActuel == '1')
                  {
                    tabImage[i][j] = 1;
                    //printf("Test : %d", tabImage[i][j]);

                  }

                  //printf("i: %d - j: %d - c: %d\n",i, j, tabImage[i][j] );
                }

                else
                {
                  j--;
                }


          }
          //printf("\n");
      }


}






//fseek(fichier, 2, SEEK_SET);se possitionne deux caractere apres le debut

/*
if (fichier != NULL)

    {

        fscanf(fichier, "%d %d %d", &score[0], &score[1], &score[2]);

        printf("Les meilleurs scores sont : %d, %d et %d", score[0], score[1], score[2]);



        fclose(fichier);
*/

       // On continue tant que fgetc n'a pas retourné EOF (fin de fichier)
   //}
      fclose(image);

      i = 0;
      j = 0;

      //printf("\ntableau %d \n",tabImage[0][2]);


            for (i = 0; i < tabx; i++)
            {
              //printf("tabx: %d\n",tabx );
              //printf("taby: %d\n",taby );


                for(j = 0; j < taby; j++)
                {
                  //printf("%d",tabImage[i][j]);
                  if (tabImage[i][j] == 0)
                  {
                    printf("%c",254);
                  }
                  else if(tabImage[i][j] == 1)
                  {
                    printf("%c",255);
                  }






                //printf("%d",tabImage[i][j] );
              }
                //printf("tabx: %d\n",tabx );
                //printf("taby: %d\n",taby );

                printf ("\n");

            }
            printf ("\n");





            //printf("%s", chaine); // On affiche la chaîne qu'on vient de lire
            //printf("%c", 254);





    return 0;



}
